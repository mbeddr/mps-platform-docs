<?xml version = "1.0" encoding = "utf-8"?>
<html>
  <head>
    <meta charset="utf-8"></meta>
    <title>PhysicalUnitsDocumentation</title>
    <style type="text/css">html{
font-family : sans-serif;
line-height : 120%;
}
a{
text-decoration : none;
}
.tableContainer{
}
.table{
}
.tablecaption{
}
table.inline{
}
table{
border-collapse : collapse;
}
td,th{
border : 1px solid grey;
padding : 0.5ex;
}
.tableOfContents{
}
.tocChapter{
margin-left : 2em;
}
.tocSection{
margin-left : 2em;
}
.section{
}
.codeblockContainer{
border : 2px solid grey;
padding : .5em;
overflow : auto;
margin : 1em 0;
}
.codeblock{
display : inline-block;
margin : 0;
}
.codeblock br{
display : none;
}
.originalNode::before{
content : "⬈";
display : inline-block;
padding-left : .1em;
}
.cref::after{
content : "⬈";
padding-left : .1em;
}
.greyBox{
background-color : lightgrey;
padding : 0.5em;
}
.imagecontainer{
margin : 1em 0;
}
.imagecontainer.border{
border : 2px solid grey;
padding : .5em;
}
img{
max-width : 100%;
}
.border .caption{
margin-bottom : 0;
padding-bottom : 0;
}
.imagecaption{
}
.caption{
font-size : 80%;
}
.bold{
}
.code{
}
.emph{
}
.keyPress{
-moz-border-radius : .5em;
-webkit-border-radius : .5em;
border-radius : .5em;
-moz-box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
-webkit-box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
background : rgb(240, 240, 240);
color : rgb(40, 40, 40);
display : inline;
display : inline-block;
padding : 0em .2em;
font-size : 80%;
}
.key{
display : inline;
display : inline-block;
min-width : 1em;
padding : .2em .3em;
margin : .2em;
font : normal .85em/1 "Lucida Grande", Lucida, Arial, sans-serif;
text-align : center;
text-decoration : none;
-moz-border-radius : .3em;
-webkit-border-radius : .3em;
border-radius : .3em;
border : none;
cursor : default;
-moz-user-select : none;
-webkit-user-select : none;
user-select : none;
}
.key{
background : rgb(80,80,80);
background : -moz-linear-gradient(top, rgb(60, 60, 60), rgb(80, 80, 80));
background : -webkit-gradient(linear, left top, left bottom, from(rgb(60, 60, 60)), to(rgb(80, 80, 80)));
color : rgb(250,250,250);
text-shadow : -1px -1px 0 rgb(70, 70, 70);
-moz-box-shadow : inset 0 0 1px rgb(150, 150, 150), inset 0 -.05em .4em rgb(80, 80, 80), 0 .1em 0 rgb(30, 30, 30), 0 .1em .1em rgba(0, 0, 0, .3);
-webkit-box-shadow : inset 0 0 1px rgb(150, 150, 150), inset 0 -.05em .4em rgb(80, 80, 80), 0 .1em 0 rgb(30, 30, 30), 0 .1em .1em rgba(0, 0, 0, .3);
box-shadow : inset 0 0 1px rgb(150, 150, 150), inset 0 -.05em .4em rgb(80, 80, 80), 0 .1em 0 rgb(30, 30, 30), 0 .1em .1em rgba(0, 0, 0, .3);
}
.math{
background-color : light-blue;
}
.menu{
background-color : green;
}
.menuClick{
-moz-box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
-webkit-box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
box-shadow : inset 0 1px 3px rgba(0, 0, 0, .7);
background : rgb(240, 240, 240);
color : rgb(40, 40, 40);
display : inline;
display : inline-block;
padding : 0em 0.2em;
font-size : 80%;
}
.menuItem{
display : inline;
display : inline-block;
min-width : 1em;
padding : .2em .3em;
margin : 0 .2em;
min-height : 1.2em;
font : normal .85em/1 "Lucida Grande", Lucida, Arial, sans-serif;
text-align : center;
text-decoration : none;
cursor : default;
-moz-user-select : none;
-webkit-user-select : none;
user-select : none;
background : rgb(0,0,240);
background : -moz-linear-gradient(top, rgb(0, 0, 220), rgb(0, 0, 240));
background : -webkit-gradient(linear, left top, left bottom, from(rgb(0, 0, 220)), to(rgb(0, 0, 240)));
color : rgb(250,250,250);
text-shadow : -1px -1px 0 rgb(70, 70, 70);
}
.url{
text-decoration : underline;
}
.attachment{
}
.footnoteOrigin{
}
.footnoteText{
border-top : 1px solid lightgrey;
padding-top : 4px;
font-size : 80%;
}
.footnoteText+.footnoteText{
border-top : 0;
}
.imgRef{
}
.sectRef{
}
.docRef{
}
.todo{
background-color : yellow;
}
.cref{
}
.superscript{
}
.subscript{
}
</style>
  </head>
  <body>
    <div>
      <h1 id="sid5750357924870581735" class="section">1 Introduction</h1>
      <p class="body">
        The new language <i>org.iets3.core.expr.typetags.phyunits</i> was created as a replacement for 
        <i>org.iets3.core.expr.typetags.units</i>
        ,  
        <i>org.iets3.core.expr.typetags.units.quantity</i>
         and its helper modules 
        <i>org.iets3.core.expr.typetags.units.si</i>
         and 
        <i>org.iets3.core.expr.typetags.units.interpreter</i>
        . The standard library of this language is called 
        <i>org.iets3.core.expr.typetags.phyunits.si</i>
        . Both languages can be used separately and there is no automatic migration. Only console scripts exist (MigrateToNewUnitsLanguage and MigrateUnitConceptRefsAndSiReferences). Some manual migration is still needed. To go back to the old concepts, extension methods can be used (e.g. <code class="code">newUnit.tolOldUnitx()</code>). They are located in the plugin solution of 
        <i>org.iets3.core.expr.typetags.units</i>
         and need to be imported.
        <br />
        
        <br />
        The following references are helpful to understand the design decisions that where made in this language:
      </p>
      <ul>
          <li>          <a href="https://en.wikipedia.org/wiki/SI_base_unit" class="url">SI base unit</a>

          </li>
          <li>          <a href="https://en.wikipedia.org/wiki/SI_derived_unit" class="url">SI derived unit</a>

          </li>
          <li>          <a href="https://en.wikipedia.org/wiki/Non-SI_units_mentioned_in_the_SI" class="url">Non-SI units mentioned in the SI</a>

          </li>
          <li>          <a href="https://en.wikipedia.org/wiki/Metric_prefix" class="url">Metric prefix</a>

          </li>
          <li>          <a href="https://en.wikipedia.org/wiki/Binary_prefix" class="url">Binary prefix</a>

          </li>
          <li>          <a href="https://en.wikipedia.org/wiki/List_of_physical_quantities" class="url">List of physical quantities</a>
      </ul>
    </div>
    <div>
      <h1 id="sid5750357924870713446" class="section">2 Concepts</h1>
      <div>
        <h2 id="sid5750357924870883496" class="section">2.1 Quantity</h2>
        <p class="body">
          A quantity is a term that describes how much or how many of something there is. Quantities can be compared (equals, less, more) or assigned a numerical value multiple of a unit of measurement. The term can be customized through the extension point <a href="http://127.0.0.1:63320/node?ref=r%3A6e69e40f-b186-4866-917f-dbdef5b3c590%28org.iets3.core.expr.typetags.physunits.plugin%29%2F5088826354699943892" class="cref">PhysUnitLangConfig</a>. They have a symbol and an optional name. Another similar term that we have to differentiate with is <em class="emph">measure</em>. A measure is a way of expressing a quantity using a unit or a standard. For example, the quantity of water in a glass can be measured by using a unit of volume, such as milliliters or liters. This term is not used in this language. 
          <br />
          
          <br />
          Quantities as well as <span class="sectRef">Section <a href="PhysicalUnitsDocumentation.html#sid5750357924870884103">Units</a></span> support multiplication, division, and exponents with integers or fractions in their specification. There are intentions to simplify them and convert between different operations. All operations are implemented as operations of a mathematical group. Exponents in specifications are automatically sorted in  ascending order for positive exponents and descending order for negative exponents. This behavior can be overwritten through the extension point.
        </p>
        <div class="imagecontainer border" id="sid5750357924870883604">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_siBaseQuantities_sid5750357924870883604.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.1-A: </b>Example: Quantity Declarations<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F5750357924870722101" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">
          In the inspector, the same formula can be read with SI base quantities. The specification can also be edited in
          <br />
          terms of quantity symbols instead of names. 
        </p>
        <div class="imagecontainer border" id="sid1300401771333208513">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_magneticFluxInspector_sid1300401771333208513.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.1-B: </b>Example: Inspector of a Derived Quantity<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F4067340399592148773" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
      </div>
      <div>
        <h2 id="sid5750357924870884103" class="section">2.2 Units</h2>
        <p class="body">
          A physical unit is a standardized value that is used to measure and compare physical quantities. For example, the meter is a unit of length, and the kilogram is a unit of mass. length and mass are the quantities. 
          <br />
          Units must have a symbol name and can also have an optional unit name. The must reference a quantity that can be automatically derived via an intention.
          <br />
          
          <br />
          They support different scaling methods: no-scaling, metric scaling (= metric prefixes), and binary scaling (= binary prefixes), and have their type derived from the referenced quantity:
        </p>
        <div class="imagecontainer border" id="sid1300401771333362342">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_unitsDeclaration_sid1300401771333362342.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.2-A: </b>Example: Unit Declarations<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F1300401771333210250" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">
          There is special handling for kilogram because it is a base unit with a metric prefix.
          <br />
          Units can also be derived by adding the <em class="emph">derived</em> keyword and adding a specification for the unit:
        </p>
        <div class="imagecontainer border" id="sid1300401771334639871">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_derivedUnits_sid1300401771334639871.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.2-B: </b>Example: Derived Units<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F1300401771333362454" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">The SI unit equivalents are shown in the inspector:</p>
        <div class="imagecontainer border" id="sid1300401771334640162">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_derivedUnitsInspector_sid1300401771334640162.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.2-C: </b>Example: Inspector of a Derived Unit<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F4067340399592148943" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">The type of the unit is derived from the quantity specification and the unit specification is checked against the quantity specification:</p>
        <div class="imagecontainer" id="sid1300401771334661333">
          <div class="image"><img src="../../../../../../../images/phyunits/incompatible_unit.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.2-D: </b>Incompatible Units</p>
          </div>
        </div>
      </div>
      <div>
        <h2 id="sid8938656833755503269" class="section">2.3 Conversion Rules</h2>
        <p class="body">Conversion rules define how the convert expressions (<em class="emph">convert</em>and <em class="emph">convertTo</em>) should execute the conversion between 2 referenced units. They reference a source and a target unit that each can have an optional prefix. The <em class="emph">val</em>expression refers to the converted value itself. The return type can be specified as well:</p>
        <div class="imagecontainer border" id="sid8640663414384669875">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_kgtocg_sid8640663414384669875.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.3-A: </b>Example: Conversion Rule from Kilogram to Centigram<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F8640663414384505432" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
      </div>
      <div>
        <h2 id="sid1300401771334714738" class="section">2.4 Conversion Expressions</h2>
        <p class="body">They reference a target unit and have an expression with a unit reference attached to it as the source. The unit references that now also contain the prefixes are converted to the prefix-less version:</p>
        <div class="imagecontainer border" id="sid8938656833755471278">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_scalingMeters_sid8938656833755471278.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.4-A: </b>Example: Scaling Meters to Other Prefixes<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F7092451331179422366" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">This information is also visible in the inspector:</p>
        <div class="imagecontainer border" id="sid8163981887999003718">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_convertTo_sid8163981887999003718.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.4-B: </b>Example: The Inspector of a Convert Expression <a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F3722898584386988211" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <p class="body">This also works for expressions with binary prefixes:</p>
        <div class="imagecontainer border" id="sid8938656833755473997">
          <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_scalingBinaryBytes_sid8938656833755473997.png" /></div>
          <div class="imagecaption">
            <p class="caption"><b>Figure
                2.4-C: </b>Example: Scaling Expressions with Binary Prefixes<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F3432064097543746397" class="originalNode" title="open in MPS"></a></p>
          </div>
        </div>
        <div>
          <h3 id="sid8938656833755474589" class="section">2.4.1 Implicit Conversions</h3>
          <p class="body">When no convert expression is used, implicit conversions between different prefixes are executed automatically by the interpreter. This can be deactivated through an extension point or by surrounding the expression with a <code class="code">noConvert</code> expression:</p>
          <div class="imagecontainer border" id="sid8938656833755491275">
            <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_implicitConversions_sid8938656833755491275.png" /></div>
            <div class="imagecaption">
              <p class="caption"><b>Figure
                  2.4.1-A: </b>Example: Implicit Conversions<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F8816361515779942121" class="originalNode" title="open in MPS"></a></p>
            </div>
          </div>
          <p class="body">
            Integer literals sometimes use BigIntegers for the conversion which can result in overflows or 0 as the result.
            <br />
            The editor will show a warning in those cases. The fourth assert item shows this issue. In such cases, cast the expression to use floating point numbers or use floating point literals.
            <br />
            
            <br />
            Existing rules can be marked with the <em class="emph">implicit</em> keyword to provide custom implicit conversion rules. The visible implicit rule with the highest priority in the current scope will be chosen. The automatically generated implicit rules have a priority of 0. The priority can be set in the inspector of the rule:
          </p>
          <div class="imagecontainer border" id="sid8938656833755491435">
            <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_convertKGToG_sid8938656833755491435.png" /></div>
            <div class="imagecaption">
              <p class="caption"><b>Figure
                  2.4.1-B: </b>Example: Implicit Conversion Rule<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F1300401771334716644" class="originalNode" title="open in MPS"></a></p>
            </div>
          </div>
          <p class="body"></p>
          <div class="imagecontainer border" id="sid8938656833755493890">
            <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_convertKGToGInspector_sid8938656833755493890.png" /></div>
            <div class="imagecaption">
              <p class="caption"><b>Figure
                  2.4.1-C: </b>Example: Implicit Property Visible in the Inspector of a Conversion Rule<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F1300401771334716644" class="originalNode" title="open in MPS"></a></p>
            </div>
          </div>
        </div>
        <div>
          <h3 id="sid8938656833755494420" class="section">2.4.2 Eager Conversion Rules</h3>
          <p class="body">Eager conversion rules have the keyword <em class="emph">eager</em> at the start of the rule. In those rules, the <em class="emph">val</em> still has the original unit attached to it.</p>
          <div class="imagecontainer border" id="sid8640663414384786896">
            <div class="imageWithBorder"><img src="../../../../../../../images/phyunits/PhysicalUnitsDocumentation_convertKgToDg_sid8640663414384786896.png" /></div>
            <div class="imagecaption">
              <p class="caption"><b>Figure
                  2.4.2-A: </b>Example: Eager Conversion Rule<a href="http://127.0.0.1:63320/node?ref=r%3A8a61b30f-b146-47ec-8244-6bf953852d87%28org.iets3.core.expr.typetags.physunits.documentation%29%2F8938656833754889247" class="originalNode" title="open in MPS"></a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <h1 id="sid1300401771334714183" class="section">3 Standard Library</h1>
      <p class="body">The standard library is conform to the international standard for SI base and derived units as well as units that are often used with SI units. For a few cases, Unicode symbols are used which means that in those cases the code completion menu has to be used.</p>
      <div>
        <h2 id="sid1300401771334714441" class="section">3.1 Units Of Digital Information</h2>
        <p class="body">There is also some additional support for units of digital information because they use binary prefixes instead of decimal prefixes. </p>
        <div>
          <h3 id="sid1300401771334714472" class="section">3.1.1 Example</h3>
          <p class="body">            <code class="code">1Kbyte = 1000 byte but  1kib =  1024 b</code>
            <br />
             
            <br />
            Translated into English: 1 kilobyte equals 1000 bytes and 1 kibibyte (binary kilobyte) equals 1024 binary bytes.
          </p>
        </div>
      </div>
      <p class="body">Also part of the standard library is now a class <a href="http://127.0.0.1:63320/node?ref=r%3A720d563d-1633-46b3-a98e-08d2fde4c4a8%28org.iets3.core.expr.typetags.physunits.behavior%29%2F4067340399596259264" class="cref">StandardUnitHelper</a> for checking if a unit is a SI unit, the &quot;unitless&quot; unit and so on.</p>
    </div>
  </body>
</html>